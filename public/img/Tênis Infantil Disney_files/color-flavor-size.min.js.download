"use strict";String.prototype.includes||(String.prototype.includes=function(e,t){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),this.indexOf(e,t)!==-1}),function(){function e(e,t){t=t||document;var o=t.querySelectorAll(e);return window.freedom.nodeListToArray(o)}function t(t){t||(t=e(E)),t.map(function(t){return e(_,t)}).map(function(e){return e.forEach(function(e){e.removeEventListener(H,f)})})}function o(){document.querySelectorAll(".buy-button-now")&&window.freedom.nsPubSub.pub("disabled.button.multiple",document.querySelectorAll(".buy-button-now"),!1)}function r(){var o=e(E);t(o),m(o)}function n(){z=document.cookie.includes("fshipEligible")}function i(){L=document.cookie.includes("zipcode")}function u(e){try{if(window.history&&window.history.pushState&&e.title){var t=document.querySelector("[data-sku-changed-target]").innerHTML;t=JSON.stringify(t),A++,history.pushState('{"content": '+t+', "page": '+A+"}",e.title,e.originalUrl)}}catch(o){console.error("Color-Flavor::setHistory::could not set history",o)}}function a(e){window.freedom.nsPubSub.pub("color-flavor-size.changeHtml.before");var t=document.createElement("div");C&&z&&L?t.appendChild(e):(t.innerHTML=e,t.querySelector(".freeDelivery-container")&&t.querySelector(".freeDelivery-container").classList.remove("hide")),document.querySelector(N).innerHTML=t.querySelector(N).innerHTML,window.freedom.nsPubSub.pub("color-flavor-size.changeHtml.after")}function d(){window.freedom.nsRequire.use("metadata",function(){window.freedom.metadata.chaordicPush(),window.freedom.metadata.gtmPush()})}function s(){document.querySelector(".price .starting-at")&&document.querySelector(".price .starting-at").classList.add("hide")}function c(e){window.freedom.nsPubSub.pub("Slider.reinitialize.all"),window.freedom.nsPubSub.pub("Youtube.video.load"),window.freedom.nsPubSub.pub("Zoom.restart"),window.freedom.nsPubSub.pub("Thumbs.restart",!1,!1),window.freedom.nsPubSub.pub("VideoPlayer.restart"),window.freedom.nsPubSub.pub("SlidePush.restart"),window.freedom.nsPubSub.pub("price.reload"),window.freedom.nsPubSub.pub("ShowOnScroll.reset"),window.freedom.nsPubSub.pub("sizeChart.restart"),window.freedom.nsPubSub.pub("installments.restart"),window.freedom.nsPubSub.pub("restrictValue.restart"),window.freedom.nsPubSub.pub("personalization.restart"),window.freedom.nsPubSub.pub("tellMe.restart"),window.freedom.nsPubSub.pub("spin.loading.animate.restart"),window.freedom.nsPubSub.pub("modal.restart"),window.freedom.nsPubSub.pub("LazyLoadingItems.update"),window.freedom.nsPubSub.pub("disabled.button.restart"),window.freedom.nsPubSub.pub("stripe.dfp.restart"),window.freedom.nsPubSub.pub("emergency-trigger-show-stock",e),document.querySelector(".wishlist .wishlist__heart")&&"pdp"===document.querySelector(".wishlist .wishlist__heart").getAttribute("data-template")&&window.freedom.nsPubSub.pub("wishlist.checkFavoriteProducts"),document.querySelector("#quickview-container")||window.freedom.nsPubSub.pub("Shipping.restart"),window.freedom.nsPubSub.pub("abTestPrice.pdp.restart",e),window.freedom.nsPubSub.pub("ModelWear.restart"),window.freedom.nsPubSub.pub("SellerPreview.restart"),x(),s(),o(),r()}function l(e,o,r){window.freedom.nsPubSub.pub("quickView.hasQuickView")?(t(),a(o),h(e),c(r)):(t(),a(o),h(e),d(),u(e),c(r))}function b(e){console.error("ColorFlavorSize::AjaxError:",e)}function w(e,t,r){var n={displayLoading:!0,method:"get",type:"html",error:function(e){v("hide",t),b(e)},success:function(o){v("hide",t),C&&z&&L?window.freedom.nsPubSub.pub("change.ColorFlavorSize.freeShipping",o,e,r):l(e,o,r)}};e.data&&(n.data=e.data),o(),v("show",t),y(),window.freedom.restClient.request(e.url,n)}function f(e){e.preventDefault();var t={},o=e.currentTarget,r=window.freedom.nsPubSub.pub("quickView.hasQuickView");o&&o.parentNode&&window.freedom.hasClass(o.parentNode,"active")||o&&window.freedom.hasClass(o,"ns-icon-check-mark")||(o&&o.parentNode&&o.parentNode.classList&&o.parentNode.classList.add&&o.hasAttribute("data-size")&&o.parentNode.classList.add("active"),t.data={},t.url="/refactoring"+o.getAttribute("href"),t.originalUrl=o.getAttribute("href"),t.title=o.getAttribute("data-title"),r&&(t.data.isQuickView=r),window.freedom.nsPubSub.pub("quickView.hasQuickView"),w(t,o.closest("ul"),o))}function p(e){e.forEach(function(e){e.addEventListener(H,f)})}function m(t){t.forEach(function(t){p(e(_,t))})}function S(){var t=e("["+T+'="color"] '+F)[0],o=e("["+T+'="flavor"] '+F)[0],r=e("["+T+'="size"] '+F)[0],n={};return t&&(n.color={sku:t.getAttribute("data-sku"),title:t.getAttribute("data-title"),label:t.getAttribute("data-label"),available:!t.hasAttribute("data-color-flavor-unavailable")}),o&&(n.flavor={code:o.getAttribute("data-sku"),title:o.getAttribute("data-title"),label:o.getAttribute("data-label"),available:!o.hasAttribute("data-color-flavor-unavailable")}),r&&(n.size={code:r.getAttribute("data-sku"),title:r.getAttribute("data-title"),label:r.getAttribute("data-label"),available:!r.hasAttribute("data-color-flavor-unavailable")}),n}function h(){if(q.size){var t='[data-label="'+q.size.getAttribute("data-label")+'"]',o=e(t)[0];o&&o&&o.parentNode&&o.parentNode.classList&&o.parentNode.classList.add&&o.parentNode.classList.add("active")}}function g(){var t,o,r=e("["+T+'="size"] '+F),n=q.size,i=n?n.getAttribute("data-label"):null;return r.length>1?r.forEach(function(e){var r=e.getAttribute("data-label")?e.getAttribute("data-label"):null;r===i||t||(o=e,t=!0)}):o=r[0],o}function v(e,t){window.freedom.nsPubSub.pub("spin.loading.animate",t,e)}function y(){q.color=e("["+T+'="color"] '+F)[0],q.flavor=e("["+T+'="flavor"] '+F)[0],q.size=g()}function P(e){if(e){var t=S();e(t.size?t.size.code:void 0)}}function k(e){var t=window.location.href.split("#").length>1;t||(e||history.back(),Object.keys(e).length&&(e=JSON.parse(e),e.content&&""!==e.content&&(document.querySelector("[data-sku-changed-target]").innerHTML=e.content,r(),c())))}var q={},A=0,z=document.cookie.includes("fshipEligible"),L=document.cookie.includes("zipcode"),C=document.querySelector("section[data-free-shipping-by-zipcode]"),T="data-color-flavor-size-content",E="["+T+"]",N="[data-sku-changed-target]",_="li a[data-sku]",F="li.active a",H="click",M=function(){try{var e=document.querySelector("#buy-button-now-buy-box");return(e=e&&e.getAttribute("data-seller"))?+e:(e=document.querySelector("[product-data-seller]"),e=e&&e.getAttribute("product-data-seller"),e?+e:0)}catch(t){return console.error("call-to-action.getSeller",t),0}},V=function(e,t,o){window.freedom.nsStorage.set(e,t,o)},O=function(){return window.freedom.nsStorage.get("cp_sku")||[]},x=function(){var e=document.querySelector("#buy-button-now");if(e){var t=O(),o=e.getAttribute("data-sku"),r=o.split("-");r=r[0]+"-"+r[1]+"-"+r[2];var n=document.querySelector("#stamp-coupon"),i=n&&n.getAttribute("data-discount"),u=document.querySelector("#stamp-coupon .text__stamp_coupon p"),a=t.find(function(e){return e.sku===o}),d=t.find(function(e){return e.skuFather===r});if(n&&d&&!a){var s=M().toString(),c={sku:o,skuFather:r,sellerId:s};t.push(c),V("cp_sku",t,1880)}n&&t.find(function(e){return e.skuFather===r})?(window.freedom.addClass(n,"coupon-actived"),u.innerHTML=i+" de desconto aplicado"):n&&(window.freedom.removeClass(n,"coupon-actived"),u.innerHTML="Quero "+i+" de desconto aplicado"),window.WansTools&&(window.WansTools.ecProduct("detail"),window.WansTools.ecProduct("add")),window.freedom.addClass(n,"loaded")}return!1};!function(){m(e(E)),window.onpopstate=function(e){e&&k(e.state)},window.document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("[data-sku-changed-target]").innerHTML;e&&(e=JSON.stringify(e),history.replaceState('{"content": '+e+', "page": '+A+"}",document.title,window.location.href))}),document.querySelector(".wishlist .wishlist__heart")&&"pdp"===document.querySelector(".wishlist .wishlist__heart").getAttribute("data-template")&&window.freedom.nsPubSub.pub("wishlist.checkFavoriteProducts"),document.querySelector("#quickview-container")||window.freedom.nsPubSub.pub("Shipping.restart"),C&&(window.freedom.nsPubSub.sub("returnCheckedFreeShipping",l),window.freedom.nsPubSub.sub("zipcodeCookie.reinit",i),window.freedom.nsPubSub.sub("shippingEligibleCookie.reinit",n)),window.freedom.nsPubSub.sub("ColorFlavorSize.select.size",P),window.freedom.nsPubSub.sub("ColorFlavorSize.restart",c)}()}();
//# sourceMappingURL=../../../../../target/maps/_refactoring/_components/product/color-flavor-size/desktop/color-flavor-size.min.js.map
