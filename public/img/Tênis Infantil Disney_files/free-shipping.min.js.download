"use strict";!function(e,i){function r(){s=window.freedom.getCookie("zipcode")}var n=dataLayer&&dataLayer.length&&dataLayer[0].page?dataLayer[0].page.pageID.toLowerCase():"others",o=i.cookie.includes("zipcode"),t=i.cookie.includes("fshipEligible"),s=window.freedom.getCookie("zipcode"),d=window.freedom.getCookie("fshipEligible"),c=function(){d=window.freedom.getCookie("fshipEligible")},a=function(e,i){if(e.freeShipping&&!i.querySelector(".tag-shipping")){var r=document.createElement("p");r.classList.add("tag-shipping"),r.classList.add("new-tag"),r.innerHTML="FRETE GRÁTIS",i.insertAdjacentElement("afterbegin",r)}else e.freeShipping&&i.querySelector(".tag-shipping")?i.querySelector(".tag-shipping").classList.remove("hide"):!e.freeShipping&&i.querySelector(".tag-shipping")&&i.querySelector(".tag-shipping").classList.add("hide")},l=function(e){e.querySelector(".tag-shipping.new-tag")&&e.querySelector(".tag-shipping.new-tag").classList.add("hide"),e.querySelector(".tag-shipping:not(.new-tag)")&&e.querySelector(".tag-shipping:not(.new-tag)").classList.remove("hide")},u=function(e,i,r,n){var o=i.querySelector(".freeDelivery-container");if(!o)return void window.freedom.nsPubSub.pub("returnCheckedFreeShipping",r,i);if(e.freeShipping){if(i.querySelector(".freeDelivery-gif")&&i.querySelector(".freeDelivery-gif").classList.add("hide"),i.querySelector(".freeDelivery-icon")&&i.querySelector(".freeDelivery-icon").classList.add("hide"),o.querySelector(".tag-shipping"))o.querySelector(".tag-shipping").classList.remove("hide"),o.querySelector(".ns-icon-free-shipping").classList.remove("hide");else{var t=document.createElement("p");t.classList.add("tag-shipping"),t.classList.add("new-tag"),t.innerHTML="FRETE GRÁTIS";var s=document.createElement("i");s.classList.add("ns-icon"),s.classList.add("ns-icon-free-shipping"),o.appendChild(s),o.appendChild(t)}o.classList.remove("hide")}else e.freeShipping||o.children.length&&[].map.call(o.children,function(e){e.classList.add("hide")});window.freedom.nsPubSub.pub("nsLoading.hide",document.body),r&&window.freedom.nsPubSub.pub("returnCheckedFreeShipping",r,i,n)},p=function(e,i,r){var n=e.querySelector(".freeDelivery-container");n&&(e.querySelector(".tag-shipping")&&(e.querySelector(".tag-shipping").classList.add("hide"),e.querySelector(".ns-icon-free-shipping").classList.add("hide")),e.querySelector(".freeDelivery-gif")&&e.querySelector(".freeDelivery-gif").classList.remove("hide"),e.querySelector(".freeDelivery-icon")&&e.querySelector(".freeDelivery-icon").classList.remove("hide"),n.classList.remove("hide")),window.freedom.nsPubSub.pub("nsLoading.hide",document.body),i&&window.freedom.nsPubSub.pub("returnCheckedFreeShipping",i,e,r)},g=function(e,i){var r=i.querySelector(".freeDelivery-container");if(!r)return void window.freedom.nsPubSub.pub("returnCheckedFreeShippingQuickView",i);if(e.freeShipping){i.querySelector(".freeDelivery-icon")&&i.querySelector(".freeDelivery-icon").classList.add("hide");var n=document.createElement("p");n.classList.add("tag-shipping"),n.innerHTML="FRETE GRÁTIS";var o=document.createElement("i");o.classList.add("ns-icon"),o.classList.add("ns-icon-free-shipping"),r.appendChild(o),r.appendChild(n),r.classList.remove("hide")}else e.freeShipping||r.children.length&&[].map.call(r.children,function(e){e.classList.add("hide")});window.freedom.nsPubSub.pub("returnCheckedFreeShippingQuickView",i)},h=function(e){var i=e.querySelector(".freeDelivery-container");i&&(e.querySelector(".tag-shipping")&&(e.querySelector(".tag-shipping").classList.add("hide"),e.querySelector(".ns-icon-free-shipping").classList.add("hide")),i.firstChildElement&&e.querySelector(".freeDelivery-icon")&&e.querySelector(".freeDelivery-icon").classList.remove("hide"),i.classList.remove("hide")),window.freedom.nsPubSub.pub("returnCheckedFreeShippingQuickView",e)},f=function(e,i,r,n,o,t){var s=document.querySelector("html").classList.contains("product-page")?"product":"search",d={method:"GET",headers:{storeId:window.freedom.getCookie("storeId"),campaign:window.freedom.getCookie("campaignCode")||""},success:function(e){"product"!==s&&!document.querySelector(".tingle-modal--visible")||n.classList.contains("is-quickview")?"search"!==s||n.classList.contains("is-quickview")?n.classList.contains("is-quickview")&&g(e,n):a(e,n):u(e,n,o,t)},error:function(){"product"===s||document.querySelector(".tingle-modal--visible")?p(n,o,t):"search"!==s||n.classList.contains("is-quickview")||document.querySelector(".tingle-modal--visible")?n.classList.contains("is-quickview")&&h(n):l(n)}},c="/promotion/shipping/"+e+"/sellers/"+i+"/zipCodes/"+r;e&&i&&r?window.freedom.restClient.request(c,d):"product"===s||document.querySelector(".tingle-modal--visible")?p(n,o,t):"search"!==s||n.classList.contains("is-quickview")||document.querySelector(".tingle-modal--visible")?n.classList.contains("is-quickview")&&h(n):l(n)},w=function(e){var i=e&&e.hasOwnProperty("eligible")?e.eligible:"";document.cookie="fshipEligible="+i+";max-age=7200;path=/",window.freedom.nsPubSub.pub("shippingEligibleCookie.reinit"),"search"===n?window.freedom.nsPubSub.pub("returnShippingEligibility.LazyPrice",i):"product"===n?window.freedom.nsPubSub.pub("returnShippingEligibility.PDP"):window.freedom.nsPubSub.pub("nsLoading.hide",document.body)},S=function(e){var i=e||window.freedom.getCookie("zipcode");if(!i)return void w(null);var r={method:"GET",headers:{storeId:window.freedom.getCookie("storeId")},success:function(e){var i=e;"string"==typeof e&&(i=JSON.parse(e)),w(i)},error:function(){w(null)}},n="/promo/freeshipping/"+i+"/eligibility";window.freedom.restClient.request(n,r)},b=function(e){var i=e&&e.length&&e.hasOwnProperty("addresses")?e.addresses[0].zipCode:"",r=new Date;r.setMonth(r.getMonth()+1);var n="expires="+r.toUTCString();document.cookie="zipcode="+i+";"+n+";path=/",window.freedom.nsPubSub.pub("zipcodeCookie.reinit"),i&&(window.freedom.nsPubSub.pub("Shipping.restart"),window.freedom.nsPubSub.pub("changeHeaderZipcode",i)),window.freedom.nsPubSub.pub("checkFreeShippingEligibility",i)},m=function(){var e={method:"get",type:"json",success:function(e){e&&b(e)},error:function(){b()}};window.freedom.restClient.request("/soft-login",e)};window.freedom.nsPubSub.sub("zipcodeCookie.reinit",r),window.freedom.nsPubSub.sub("shippingEligibleCookie.reinit",c),window.freedom.nsPubSub.sub("verifyFreeShipping",f),window.freedom.nsPubSub.sub("checkFreeShippingEligibility",S),o&&!d&&S(s),t||o||m()}(window,window.document);
//# sourceMappingURL=../../../../../target/maps/_refactoring/_components/_behavior/free-shipping/all/free-shipping.min.js.map
