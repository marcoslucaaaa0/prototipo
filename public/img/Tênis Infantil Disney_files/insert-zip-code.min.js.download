"use strict";var appZipCode=function(){var e={form:"[data-zip-code-form",input:"[data-zip-code-input]",btn_submit:"[data-zip-code-submit]",err_class:".zip__code-err",fail_class:".zip__code-fail-err",empty_class:".zip__code-empty",open_lightbox_freigth:"section.zipcode-content",container:".zipcode-content .zip__code--container",box_input:".zip__code-box",overlay:"overlay.display",tooltip:".zip__code--tooltip",login:".zip__code-user"},t=document.querySelector("section[data-free-shipping-by-zipcode]"),o=dataLayer[0].page?dataLayer[0].page.pageID.toLowerCase():"others",n=function(){document.querySelector(e.input).addEventListener("keyup",function(e){var t=e.target.value.replace(/[^\d]+/g,"");t=t.replace(/(\d{5})(\d)/,"$1-$2"),e.target.value=t})},c=function(t){document.querySelector(e.input).value=t.replace(/(\d{5})(\d)/,"$1-$2")},i=function(){return document.querySelector("html").getAttribute("lang")},r=function(e){return e.replace(/(\d{5})(\d)/,"$1-$2")},u=function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null},d=function(){var t="";return t=null!==u("zipcode")?u("zipcode"):document.querySelector(e.input).value,r(t)},s=function(e){document.querySelector(".text").classList.add("hide");var t=document.querySelector(".text__sucess");t.querySelector("span").innerText=r(e),t.classList.remove("hide"),document.querySelector(".zipcode-content__block--text")?(document.querySelector(".zipcode-content__block--text").innerHTML='Enviar para: <span class="zipcode-value">'+r(e)+"</span>",document.querySelector(".zipcode-content__block--text").classList.add("filled")):document.querySelector(".zipcode-content__text").innerHTML="Enviar para <span class='zipcode-value'>"+r(e)+"</span>"},a=function(){var t=document.querySelector(e.input),o=document.querySelector(e.login);t.closest(".zip__code-box").classList.add("hide"),o.classList.add("hide"),t=t.value.replace(/[^\d]+/g,""),document.querySelector(e.btn_submit).querySelector("span").innerText="OK";var n=new Date;n.setMonth(n.getMonth()+1);var c="expires="+n.toUTCString();document.cookie="zipcode="+t+";"+c+";path=/",window.freedom.nsPubSub.pub("zipcodeCookie.reinit"),s(t)},l=function(t){t?""!==document.querySelector(e.input).value?(document.querySelector(e.err_class).classList.remove("hide"),document.querySelector(e.empty_class).classList.add("hide"),document.querySelector(e.fail_class).classList.add("hide")):(document.querySelector(e.err_class).classList.add("hide"),document.querySelector(e.fail_class).classList.add("hide"),document.querySelector(e.empty_class).classList.remove("hide")):(document.querySelector(e.err_class).classList.add("hide"),document.querySelector(e.empty_class).classList.add("hide"),document.querySelector(e.fail_class).classList.add("hide"),a())},p=function(e,t){if(""!==e){var o=e.replace(/\D/g,""),n=/^[0-9]{8}$/;return"es-AR"===t?n=/^[0-9]{4}$/:"es-MX"===t&&(n=/^[0-9]{5}$/),n.test(o)}return!1},m=function(){""!==document.querySelector(e.input).value?document.querySelector(e.box_input+" label").classList.remove("hide"):document.querySelector(e.box_input+" label").classList.add("hide")},b=!0,y=function(){b&&(b=!1,document.querySelector(e.input).addEventListener("input",function(){m()}),document.querySelector(e.input).addEventListener("blur",function(){m()}))},S=function(){document.querySelector(".text__sucess").classList.add("hide"),document.querySelector(".text").classList.remove("hide"),document.querySelector(".zip__code-box").classList.remove("hide"),document.querySelector(e.input).setAttribute("value",d()),document.querySelector(e.box_input+" label").classList.remove("hide"),u("uname")?document.querySelector(e.login).classList.add("hide"):document.querySelector(e.login).classList.remove("hide")},h=function(){document.querySelector(e.open_lightbox_freigth).addEventListener("click",function(){u("zipcode")?(S(),document.querySelector(e.btn_submit).querySelector("span").innerText="Alterar"):(S(),document.querySelector(e.btn_submit).querySelector("span").innerText="Consultar"),window.freedom.nsPubSub.pub(e.overlay,"show"),document.querySelector(e.container).classList.remove("hide")});var n=function(){document.querySelector(e.container).classList.add("hide"),window.freedom.nsPubSub.pub(e.overlay,"hide"),document.querySelector("button[data-zip-code-submit] span").innerText="ALTERAR",document.querySelector(e.tooltip)&&(document.querySelector(e.tooltip).classList.remove("hide"),setTimeout(function(){document.querySelector(e.tooltip).classList.add("hide")},5e3))};document.querySelector(e.btn_submit).addEventListener("click",function(c){if(c.preventDefault(),c.stopPropagation(),"OK"===this.querySelector(".text").innerText)n(),t&&(window.freedom.nsPubSub.pub("checkFreeShippingEligibility",u("zipcode")),"search"===o?window.freedom.nsPubSub.pub("nsLoading.show",document.body):"product"===o?(window.freedom.nsPubSub.pub("nsLoading.show",document.body),window.freedom.nsPubSub.pub("Shipping.restart")):window.freedom.nsPubSub.pub("nsLoading.show",document.body));else{var r=document.querySelector(e.input).value,d=i();l(p(r,d)?!1:!0)}}),window.freedom.live("#overlay","click",function(){window.freedom.nsPubSub.pub(e.overlay,"hide"),document.querySelector(e.container).classList.add("hide"),"OK"===document.querySelector(".zip__code--calculate .text").innerText&&t&&(window.freedom.nsPubSub.pub("checkFreeShippingEligibility",u("zipcode")),"search"===o?window.freedom.nsPubSub.pub("nsLoading.show",document.body):"product"===o?(window.freedom.nsPubSub.pub("nsLoading.show",document.body),window.freedom.nsPubSub.pub("Shipping.restart")):window.freedom.nsPubSub.pub("nsLoading.show",document.body))}),window.freedom.live(e.input,"click",function(){y()})};try{if(h(),n(),u("zipcode")){var f=u("zipcode");s(f)}window.freedom.nsPubSub.sub("changeHeaderZipcode",s),window.freedom.nsPubSub.sub("changeHeaderZipcode",c)}catch(_){console.error("ERROR | Shipping "+_)}}();
//# sourceMappingURL=../../../../target/maps/_refactoring/_components/insert-zip-code/all/insert-zip-code.min.js.map
