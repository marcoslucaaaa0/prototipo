"use strict";String.prototype.includes||(String.prototype.includes=function(e,t){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),this.indexOf(e,t)!==-1});var cluster=function(){var e=function(){var e=window.freedom.getCookie("clusterId");return e?decodeURIComponent(e):void 0},t=function(){return window.freedom.getCookie("uuid")||void 0},n=function(){return window.freedom.getCookie("storeId")||void 0},r=function(){return window.freedom.getCookie("zipcode")||void 0},o=function(e){var t="";return e&&(t=e.filter(function(e){return e.mainAddress===!0})[0].zipCode),t},a=function(e,t){return e.reduce(function(e,n,r){return 0===r?e+n[t]:e+","+n[t]},"")},l=function(e,t,n){var r="expires=";n.setTime(n.getTime()+432e5),r+=n.toGMTString(),document.cookie=e+"="+t+"; "+r+"; path=/"},m=function(e,t,n){return e&&!e.includes("anonymous")&&(!t||!n)},i={banner_stripe_home:"banner-stripe-home",home_gamma_full_top_0:"home-gamma-full-top-0",home_gamma_killers_list:"home-gamma-killers-list",home_gamma_triple_line1_rectangle_0:"home-gamma-triple-line1-rectangle-0",home_gamma_triple_line1_rectangle_1:"home-gamma-triple-line1-rectangle-1",home_gamma_triple_line1_rectangle_2:"home-gamma-triple-line1-rectangle-2",home_gamma_categories_list:"home-gamma-categories-list",home_gamma_triple_line2_rectangle_0:"home-gamma-triple-line2-rectangle-0",home_gamma_triple_line2_rectangle_1:"home-gamma-triple-line2-rectangle-1",home_gamma_triple_line2_rectangle_2:"home-gamma-triple-line2-rectangle-3",home_gamma_brands_list:"home-gamma-brands-list",home_gamma_full_buttons_line1:"home-gamma-full-buttons-line1",home_gamma_triple_line3_rectangle:"home-gamma-triple-line3-rectangle",home_gamma_banners_carousel_top:"home-gamma-banners-carousel-top",home_gamma_banners_carousel_middle:"home-gamma-banners-carousel-middle",home_gamma_banners_carousel_middle_2:"home-gamma-banners-carousel-middle-2",home_gamma_banners_carousel_bottom:"home-gamma-banners-carousel-bottom",banner_stripe_pdp:"banner-stripe-pdp",banner_stripe_search:"banner-stripe-search",banner_html_pdp:"banner-html-pdp"},_={banner_stripe_home:"banner-stripe-home",banner_stripe_pdp:"banner-stripe-pdp",banner_stripe_search:"banner-stripe-search",zt_home_triple_line3_rectangle_0:"zt-home-triple-line3-rectangle-0",zt_home_triple_line3_rectangle_1:"zt-home-triple-line3-rectangle-1",zt_home_triple_line3_rectangle_2:"zt-home-triple-line3-rectangle-2",zt_home_full_top_0:"zt-home-full-top-0",zt_home_triple_line1_rectangle_0:"zt-home-triple-line1-rectangle-0",zt_home_triple_line1_rectangle_1:"zt-home-triple-line1-rectangle-1",zt_home_triple_line1_rectangle_2:"zt-home-triple-line1-rectangle-2",zt_home_triple_line2_rectangle_0:"zt-home-triple-line2-rectangle-0",zt_home_triple_line2_rectangle_1:"zt-home-triple-line2-rectangle-1",zt_home_triple_line2_rectangle_2:"zt-home-triple-line2-rectangle-2",home_gamma_full_buttons_line1:"home-gamma-full-buttons-line1",zt_home_full_top:"zt-home-full-top",zt_home_full_middle:"zt-home-full-middle",zt_home_full_bottom:"zt-home-full-bottom",zt_home_banner_fixe1:"zt-home-banner-fixe1",zt_home_banner_fixe2:"zt-home-banner-fixe2",banner_html_pdp:"banner-html-pdp"},c=function(){document.querySelectorAll(".ghost-wrapper").forEach(function(e){e.querySelectorAll("a img").length>0?e.querySelectorAll("a img").forEach(function(t){var n=setInterval(function(){t.complete&&(e.classList.remove("ghost-wrapper"),clearInterval(n))},250)}):e.classList.remove("ghost-wrapper")})},u=function(e,t,n,r,o){"home-gamma-full-top-0"!==e[t]&&"zt-home-full-top-0"!==e[t]||!document.getElementById(e[t])||(document.getElementById(e[t]).querySelectorAll("a img").forEach(function(e){e.removeAttribute("data-campaign-interactive"),e.removeAttribute("data-banner-interactive")}),setTimeout(function(){document.getElementById(e[t]).querySelectorAll(".bullet")&&document.getElementById(e[t]).querySelectorAll(".bullet").forEach(function(e){e.classList.add("hide")})},500)),n<=r&&e[t]&&document.getElementById(e[t]).querySelectorAll("a img").forEach(function(e,t){(o.data.images&&o.data.images[t]||o.data.urlImage)&&(e.src=o.data.images?o.data.images[t].urlImage:o.data.urlImage,e.parentNode.href=o.data.images?o.data.images[t].urlTarget:o.data.urlTarget)})},g=function(e,t,n){if(document.getElementById(e[t])){var r=window.freedom.getCookie("uname")||"",o=n.data.content;o=o.replace("{username}",decodeURI(r)),o=o.replace("{clusterName}",""),document.getElementById(e[t]).innerHTML="",document.getElementById(e[t]).innerHTML=o}},s=function(e){e.forEach(function(e){var t=window.freedom.getCookie("storeId")&&"L_ZATTINI"===window.freedom.getCookie("storeId")?_:i,n=e.id.replace(/-/g,"_"),r=e.data.images?e.data.images.length:1,o=document.getElementById(t[n])?document.getElementById(t[n]).querySelectorAll("a img").length:0;"HTML"===e.data.type?g(t,n,e):u(t,n,r,o,e)}),c()},d=function(e){if(e&&!e.includes("anonymous")){var t=window.freedom.getCookie("campaignCode")||"",n="/banner/usercluster/"+e+"/"+t,r={method:"get",type:"json",success:function(e){s(e)},error:function(e){console.error(e),c()}};window.freedom.restClient.request(n,r)}else c()},h=function(e){var t=e||{},n=t.clusters?a(t.clusters,"id"):"",r=o(t.addresses),m=new Date;n?l("clusterId",n,m):l("clusterId","anonymous",m),r&&l("zipcode",r,m),d(n)},p=function(){var o=t(),a=n(),l=e(),i=r();if(m(o,l,i)){var _={method:"get",type:"json",headers:{uuid:o,storeId:a},success:function(e){h(e)},error:function(e){console.error(e),d(l)}};window.freedom.restClient.request("/soft-login?cluster=true",_)}else d(l)};try{p()}catch(f){console.error("Error trying to get logged user info and generate cookies",f)}}();
//# sourceMappingURL=../../../../../target/maps/_refactoring/_components/_behavior/cluster/all/cluster.min.js.map
