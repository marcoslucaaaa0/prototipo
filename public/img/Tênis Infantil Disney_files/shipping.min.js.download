"use strict";var appShiping=function(){var e,t=document.querySelector("section[data-free-shipping-by-zipcode]"),i=!1,n=function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null},o=function(){return document.querySelector("html").getAttribute("lang")},r=function(e){e?(document.querySelector(".ajax-loading-out").classList.remove("hide"),document.querySelector("[data-shipping-form]").classList.add("opacity")):(document.querySelector(".ajax-loading-out").classList.add("hide"),document.querySelector("[data-shipping-form]").classList.remove("opacity"))},a=function(e){var t=e.split(""),i=t.map(function(e,t){return 5===t?"-"+e:e});return i=i.join(""),i?i:null},d=function(e){var t=e.split("-"),i=[];t.forEach(function(e){var t=e.replace(/^0+(?!\.|$)/,"");i.push(t)}),i=i.join("/");var n=new Date(i),r={month:"long",day:"numeric"},a=o(),d=n.toLocaleDateString(a,r);return d?d:null},u=function(){var e=document.querySelector("[data-shipping-form]");window.freedom.nsPubSub.pub("fieldMask.load",e)},s=function(e,t){null!==n("zipcode")&&t?(document.querySelector("[data-shipping-button-consult]").classList.add(e),document.querySelector(".shipping__delivery-date").classList.remove(e),document.querySelector("[data-shipping-dates-table]").classList.remove(e)):document.querySelector("[data-shipping-button-consult]").classList.remove(e)},c=function(){document.querySelector("[data-shipping-container-input]").classList.add("hide"),window.freedom.nsPubSub.pub("overlay.display","hide"),document.querySelector(".shipping__input-fail-err").classList.remove("hide"),r(!1)},l=function(e,t){if(""!==e){var i=e.replace(/\D/g,""),n=/^[0-9]{8}$/;return"es-AR"===t?n=/^[0-9]{4}$/:"es-MX"===t&&(n=/^[0-9]{5}$/),n.test(i)}return!1},p=function(){""!==document.querySelector("[data-shipping-input]").value?document.querySelector("[data-shipping-button-consult] label").classList.remove("hide"):document.querySelector("[data-shipping-button-consult] label").classList.add("hide")},h=function(e){if(document.querySelectorAll(".box-best-seller > .seller-modal-tingle [data-seller-id]").length>0){var t=document.querySelectorAll(".box-best-seller > .seller-modal-tingle [data-seller-id]");t.forEach(function(t){t.classList.add("hide");var i=t.getAttribute("data-seller-id");if(e[i]){var n=e[i][0].deliveryDate,o=d(n);document.querySelectorAll('.box-best-seller [data-seller-id="'+i+'"] .date').forEach(function(e){e.innerText=o,e.parentElement.classList.remove("hide")})}})}},m=function(e,t,i,n){var o=e[0],r=o.minDeliveryDate,a=o.type,u=d(r);"SUPER_EXPRESS"===a?r===i?document.querySelector(".best-shipping-message").innerHTML="<b>Receba hoje</b> ao finalizar o pedido até às 12h com a opção de entrega Super Expressa para o CEP "+t+".":r===n?document.querySelector(".best-shipping-message").innerHTML="<b>Receba amanhã</b> ao escolher a opção de entrega Super Expressa para o CEP "+t+".":document.querySelector(".best-shipping-message").innerHTML="<b>Receba dia "+u+"</b> ao escolher a opção de entrega Super Expressa para o CEP "+t+".":"EXPRESS"===a?document.querySelector(".best-shipping-message").innerHTML="<b>Receba a partir do dia "+u+"</b> ao escolher a opção de entrega Expressa para o CEP "+t+".":"NORMAL"===a&&(document.querySelector(".best-shipping-message").innerHTML="<b>Receba a partir do dia "+u+"</b> ao escolher a opção de entrega Normal para o CEP "+t+".")},g=function(e,i){if(null!==n("zipcode")&&null!==e){var o=Object.getOwnPropertyNames(e).length>0;if(o){h(e);var r=document.querySelector(".shipping__table");r.querySelector("tbody").innerHTML="",document.querySelector(".shipping__delivery-magalu")&&(document.querySelector(".shipping__delivery-magalu").classList.add("hide"),document.querySelector(".shipping__delivery-magalu span").innerHTML="");var u=document.querySelector(".shipping__input").getAttribute("data-sellerid"),l=e[u],p=new Date,g=p.toLocaleDateString("pt-BR").match(/(^\d{2})\/(\d{2})\/(\d{4})/);g=g.reduceRight(function(e,t,i){return i?1===i?e+t:e+t+"-":e},""),p.setDate(p.getDate()+1);var y=p.toLocaleDateString("pt-BR").match(/(^\d{2})\/(\d{2})\/(\d{4})/);y=y.reduceRight(function(e,t,i){return i?1===i?e+t:e+t+"-":e},""),l.forEach(function(e,t){var i=e.minDeliveryDate,n="",o=r.rows.length,a=r.insertRow(o),u=a.insertCell(0),s=a.insertCell(1),c=e.type,l="",p="";window.freedom.i18n.deliveryMsg[c]&&window.freedom.i18n.deliveryMsg[c].type&&window.freedom.i18n.deliveryMsg[c].text&&("SUPER_EXPRESS"===c?i===g?(l=window.freedom.i18n.deliveryMsg.SUPER_EXPRESS.type,p="Receba hoje"):i===y?(l=window.freedom.i18n.deliveryMsg.SUPER_EXPRESS.type,p="Receba amanhã"):(l=window.freedom.i18n.deliveryMsg.SUPER_EXPRESS.type,p="Receba dia ",n=d(i)):(l=window.freedom.i18n.deliveryMsg[c].type,p=window.freedom.i18n.deliveryMsg[c].text,n=d(i))),u.innerHTML=l,s.innerHTML=p+" "+n,"COLLECT_MAGALU"===c&&(document.querySelector(".shipping__delivery-magalu")?(document.querySelector(".shipping__delivery-magalu").classList.remove("hide"),document.querySelector(".shipping__delivery-magalu span").innerHTML=p+" "+n):r.deleteRow(t))});var b=n("zipcode"),S=a(b);document.querySelector(".shipping__zipcode-current").innerHTML=S,m(l,S,g,y),s("hide",!0)}else"PDP_AUTO"===i&&(t||(document.cookie="zipcode="),document.querySelector(".shipping__delivery-date").classList.add("hide"),document.querySelector(".shipping__button--consult").classList.remove("hide"))}else c(),console.log("ERROR | Shipping");window.freedom.nsPubSub.pub("nsLoading.hide",document.body)},y=function(){var e=[];return document.querySelectorAll(".box-best-seller > .seller-modal-tingle [data-seller-id]").length>0?(document.querySelectorAll(".box-best-seller > .seller-modal-tingle [data-seller-id]").forEach(function(t){var i=t.getAttribute("data-seller-id");e.push(i)}),e=e.toString()):e=document.querySelector(".shipping__input[data-sellerid]").getAttribute("data-sellerid"),e},b=function(n,o){var a="PDP_AUTO"===n?"PDP_AUTO":"PDP_MANUAL",d=document.querySelector("[data-shipping-input]"),u=y(),s=o,l=d.getAttribute("data-sku"),p=d.getAttribute("data-height"),h=d.getAttribute("data-weight"),m=d.getAttribute("data-depth"),b=d.getAttribute("data-width"),S=d.getAttribute("data-preSale")||!1,f=d.getAttribute("data-canbetransportedbyair")||!1;window.freedom.restClient.request("/refactoring/shipping",{displayLoading:!1,method:"get",data:{zipCode:s,sellerId:u,sku:l,height:p,weight:h,depth:m,width:b,preSale:S,canbetransportedbyair:f,hasPersona:i,additionalDeliveryDays:e,headerType:a},success:function(e){t&&s&&"PDP_MANUAL"===a&&(window.freedom.nsPubSub.pub("checkFreeShippingEligibility",s,"PDP_ZIPCODE-FORM"),window.freedom.nsPubSub.pub("changeHeaderZipcode",s),window.freedom.nsPubSub.pub("zipcodeCookie.reinit")),g(e,a)},error:c,complete:function(){r(!1)}})},S=function(e){null!==n("zipcode")&&""!==n("zipcode")&&(e&&r(!0),b("PDP_AUTO",n("zipcode")),document.querySelector("[data-shipping-input]").value=n("zipcode"))},f=function(t){i=t,e=t?document.querySelector("[data-shipping-input]").getAttribute("data-adddeliverydays"):0,S("show")},v=function(e){if(e)r(!1),""!==document.querySelector(".shipping__input-box>input[type=tel]").value?(document.querySelector("[data-shipping-container-input]").classList.add("hide"),window.freedom.nsPubSub.pub("overlay.display","hide"),document.querySelector(".shipping__input-err").classList.remove("hide"),document.querySelector(".shipping__input-empty").classList.add("hide"),document.querySelector(".shipping__input-fail-err").classList.add("hide")):(document.querySelector("[data-shipping-container-input]").classList.add("hide"),window.freedom.nsPubSub.pub("overlay.display","hide"),document.querySelector(".shipping__input-err").classList.add("hide"),document.querySelector(".shipping__input-empty").classList.remove("hide"),document.querySelector(".shipping__input-fail-err").classList.add("hide"));else{document.querySelector(".shipping__input-err").classList.add("hide"),document.querySelector(".shipping__input-empty").classList.add("hide"),document.querySelector(".shipping__input-fail-err").classList.add("hide"),t?window.freedom.nsPubSub.pub("nsLoading.show",document.body):r(!0);var i=document.querySelector("[data-shipping-input]").value.replace(/\D/g,"")||n("zipcode");b(null,i)}},w=!0,q=function(){w&&(w=!1,window.freedom.live("[data-shipping-input]","input",function(){p()}),window.freedom.live("[data-shipping-input]","blur",function(){p()}))},_=function(){window.freedom.live("[data-shipping-button-consult] button","click",function(e){e.preventDefault(),u()}),window.freedom.live("[data-shipping-button-change]","click",function(){u(),document.querySelector("[data-shipping-button-consult]").classList.remove("hide"),document.querySelector("[data-shipping-date]").classList.add("hide")}),window.freedom.live("[internal-data-shipping-button-change]","click",function(){document.querySelector("[data-shipping-container-input]").classList.add("hide"),window.freedom.nsPubSub.pub("overlay.display","hide"),document.querySelector("[data-shipping-button-consult]").classList.remove("hide"),document.querySelector("[data-shipping-date]").classList.add("hide"),u(),document.querySelector("[data-shipping-input]").focus()}),window.freedom.live("[data-shipping-close], #overlay","click",function(){window.freedom.nsPubSub.pub("overlay.display","hide"),document.querySelector("[data-shipping-container-input]").classList.add("hide")}),window.freedom.live("[data-shipping-button-submit]","click",function(e){e.preventDefault();var t=document.querySelector("[data-shipping-input]").value,i=o();v(!l(t,i))}),document.querySelector("[data-shipping-button-open-form]")&&window.freedom.live("[data-shipping-button-open-form]","click",function(e){e.preventDefault(),window.freedom.nsPubSub.pub("overlay.display","show"),document.querySelector("[data-shipping-container-input]").classList.remove("hide")}),window.freedom.live("[data-shipping-input]","click",function(){document.querySelector(".shipping__input-err").classList.add("hide"),document.querySelector(".shipping__input-empty").classList.add("hide"),document.querySelector(".shipping__input-fail-err").classList.add("hide"),q()})};try{_(),u(),window.freedom.nsPubSub.sub("Shipping.restart",S),window.freedom.nsPubSub.sub("update.hasPersona.state",f)}catch(L){console.error("ERROR | Shipping "+L)}}();
//# sourceMappingURL=../../../../../target/maps/_refactoring/_components/product/shipping/desktop/shipping.min.js.map
