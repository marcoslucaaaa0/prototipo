"use strict";String.prototype.includes||(String.prototype.includes=function(t,e){if(t instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===e&&(e=0),this.indexOf(t,e)!==-1}),function(){var t,e=function(t,e){return new Promise(function(i,s){var r={method:"get",type:"html",data:e,success:function(t){i(t)},error:function(t){console.error("wishlist error: ",t),s(!1)}};window.freedom.restClient.request(t,r)})},i=function(t,i){if(t){var s={},r="/wishlist/delete/"+i,n=t&&t.parentNode?t.parentNode:null;n&&t.parentNode.classList.remove("heart-active"),t.querySelector("i").classList.remove("ns-icon-wishlist-heart-active"),t.querySelector("i").classList.add("ns-icon-wishlist-heart"),e(r,s).then()}},s=function(t,i){if(t){var s={},r="/wishlist/add/"+i,n=t&&t.parentNode?t.parentNode:null;n&&n.classList.add("heart-active"),t.querySelector("i").classList.remove("ns-icon-wishlist-heart"),t.querySelector("i").classList.add("ns-icon-wishlist-heart-active"),e(r,s).then();var o=window.freedom.getCookie("uuid");if(o&&o.includes("anonymous")){var c=window.location.pathname+"?"+t.getAttribute("data-href");window.location="/login?redirect="+c}}},r=function(t){var i=t.getAttribute("data-code"),s={},r="/wishlist/"+i;e(r,s).then(function(e){"false"!==e&&(t.querySelector(".wishlist__heart i").classList.remove("ns-icon-wishlist-heart"),t.querySelector(".wishlist__heart i").classList.add("ns-icon-wishlist-heart-active"))})},n=function(){var i={},s="/wishlist/all";e(s,i).then(function(e){t=JSON.parse(e)})},o=function(e){var i=e.getAttribute("data-code"),s=t.map(function(t){return t.code}).indexOf(i);s!==-1&&(e.querySelector(".wishlist__heart i").classList.remove("ns-icon-wishlist-heart"),e.querySelector(".wishlist__heart i").classList.add("ns-icon-wishlist-heart-active"))},c=function(e){var i=e?e.querySelector(".wishlist__heart"):document.querySelectorAll(".wishlist__heart");if(e)var s=setInterval(function(){t&&(clearInterval(s),o(i))},1e3);else i.forEach(function(t){r(t)})};window.freedom.nsPubSub.sub("wishlist.checkFavoriteProducts",c);var a=function(){var t=document.querySelectorAll(".wishlist__heart");t.length>1?t.forEach(function(t){t.addEventListener("click",function(){var t=this.getAttribute("data-code");this.querySelector("i").classList.contains("ns-icon-wishlist-heart-active")?i(this,t):s(this,t)})}):window.freedom.live(".wishlist__heart","click",function(){var t=this.getAttribute("data-code");this.querySelector("i").classList.contains("ns-icon-wishlist-heart-active")?i(this,t):s(this,t)})};window.freedom.nsPubSub.sub("wishlist.clickListener",a),function(){try{if(document.querySelector(".wishlist .wishlist__heart")&&"pdp"===document.querySelector(".wishlist .wishlist__heart").getAttribute("data-template"))"mobile"===document.querySelector(".wishlist .wishlist__heart").getAttribute("data-device")&&window.freedom.nsPubSub.pub("wishlist.checkFavoriteProducts");else{var t=window.freedom.getCookie("uuid");t&&!t.includes("anonymous")&&n()}window.freedom.nsPubSub.pub("wishlist.clickListener")}catch(e){console.error(e)}}()}();
//# sourceMappingURL=../../../../../target/maps/_refactoring/_components/_behavior/wishlist/all/wishlist.min.js.map
