"use strict";!function(){function e(){l=window.freedom.getCookie("zipcode")}var o=document.querySelector.bind(document),r=window.freedom.nsPubSub,i="data-link-rules",t=".rules-page",n={container:".freeDelivery-container",modal:".freeDelivery-modal",modal_content:".modal-content",gif:".freeDelivery-gif",close:".modal-close"},l=window.freedom.getCookie("zipcode"),c=window.freedom.getCookie("fshipEligible"),d=document.querySelector("section[data-free-shipping-by-zipcode]"),s={init:function(){this.events.openModalRules()},helpers:{checkLink:function(){var e=o(n.container).getAttribute(i);null!==e&&""!==e&&s.events.getAjax(e)},hideAll:function(){var e=document.querySelectorAll(".rules-content > article");e.forEach(function(e){e.classList.add("hide")})},showFreeDelivery:function(){document.querySelector('#comboreg [value="frete-gratis"]').selected=!0,document.querySelector("#frete-gratis").classList.remove("hide")}},events:{getAjax:function(e){var o=e,r={displayLoading:!1,method:"get",success:function(e){var o=document.createElement("div");o.innerHTML=e;var r=o,i=r.querySelector(t);s.handlers.render(i)},error:function(){console.log("ERROR | FreeDelivery")}};window.freedom.restClient.request(o,r)},openModalRules:function(){window.freedom.live(n.gif,"click",function(){null!==o(t)?(o(n.modal).classList.remove("hide"),r.pub("overlay.display","show"),document.getElementById("frete-gratis").scrollIntoView(!0)):s.helpers.checkLink()})},closeModalRules:function(){window.freedom.live(n.close,"click",function(){o(n.modal).classList.add("hide"),r.pub("overlay.display","hide")}),window.freedom.live("#overlay","click",function(){o(n.modal).classList.add("hide")})},scrolling:function(){var e,r=o(n.modal).offsetHeight,i=o(t).offsetHeight;o(n.modal).onscroll=function(){r=o(n.modal).offsetHeight,i=o(t).offsetHeight,e=o(n.modal).scrollTop,e+r>i?o(".freeDelivery-modal .modal-top").classList.remove("scroll"):o(".freeDelivery-modal .modal-top").classList.add("scroll")}},changeSelected:function(){window.freedom.live("#comboreg","change",function(e){var r=e.target.value;s.helpers.hideAll(),document.getElementById(r).classList.remove("hide"),o(n.modal).scrollTop=0})}},handlers:{render:function(e){null!==e&&(o(n.modal_content).appendChild(e),s.events.closeModalRules(),s.events.scrolling(),window.freedom.isMobile?(o(n.container).classList.add("mb"),s.helpers.hideAll(),s.events.changeSelected(),s.helpers.showFreeDelivery(),o(n.modal).classList.remove("hide")):(r.pub("overlay.display","show"),o(n.modal).classList.remove("hide"),document.getElementById("frete-gratis").scrollIntoView(!0)))}}},a=function(){c=window.freedom.getCookie("fshipEligible")},u=function(e,o,r){var i,t,n,d,s;if(e){var a=document.createElement("div");a.innerHTML=e,t=a.firstElementChild,i=t.querySelector('.buy-button-now.button-no-float[data-sku*="-"]'),n=o}else i=document.querySelector('.buy-button-now.button-no-float[data-sku*="-"]'),t=document.querySelector("#buy-box");i&&(d=i.getAttribute("data-sku"),s=i.getAttribute("data-seller")),"true"===c&&i?window.freedom.nsPubSub.pub("verifyFreeShipping",d,s,l,t,n,r):"false"===c?(t.querySelector(".freeDelivery-container")&&t.querySelector(".freeDelivery-container").classList.add("hide"),e&&window.freedom.nsPubSub.pub("returnCheckedFreeShipping",n,t,r)):(c||"string"!=typeof c)&&i||(t.querySelector(".freeDelivery-container")&&t.querySelector(".freeDelivery-container").classList.remove("hide"),t.querySelector(".freeDelivery-gif")&&t.querySelector(".freeDelivery-gif").classList.remove("hide"),t.querySelector(".freeDelivery-container .ns-icon-free-shipping")&&(t.querySelector(".freeDelivery-container .ns-icon-free-shipping").classList.add("hide"),t.querySelector(".freeDelivery-container .tag-shipping.new-tag").classList.add("hide")),window.freedom.nsPubSub.pub("nsLoading.hide",document.body),e&&window.freedom.nsPubSub.pub("returnCheckedFreeShipping",n,t,r))};try{s.init(),d&&"product"===dataLayer[0].page.pageID.toLowerCase()?"true"===c?u():"false"===c?document.querySelector(".freeDelivery-container")&&document.querySelector(".freeDelivery-container").classList.add("hide"):c||"string"!=typeof c||(document.querySelector(".freeDelivery-container")&&document.querySelector(".freeDelivery-container").classList.remove("hide"),document.querySelector(".freeDelivery-container .ns-icon-free-shipping")&&(document.querySelector(".freeDelivery-container .ns-icon-free-shipping").classList.add("hide"),document.querySelector(".freeDelivery-container .tag-shipping.new-tag").classList.add("hide"))):d||"product"!==dataLayer[0].page.pageID.toLowerCase()||document.querySelector(".freeDelivery-container")&&document.querySelector(".freeDelivery-container").classList.remove("hide"),window.freedom.nsPubSub.sub("change.ColorFlavorSize.freeShipping",u),window.freedom.nsPubSub.sub("returnShippingEligibility.PDP",u),window.freedom.nsPubSub.sub("zipcodeCookie.reinit",e),window.freedom.nsPubSub.sub("shippingEligibleCookie.reinit",a)}catch(f){console.error("ERROR | FreeDelivery PDP"+f)}}();
//# sourceMappingURL=../../../../target/maps/_refactoring/_components/free-delivery-2/all/free-delivery.min.js.map
